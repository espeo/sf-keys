#!/bin/sh
. /opt/farm/scripts/init

add_root_key() {
	/opt/farm/ext/passwd-utils/add-key.sh root inline "$1"
}

if [ "`which lsattr 2>/dev/null`" != "" ] && [ "`lsattr -l ~/.ssh/authorized_keys |grep Immutable`" != "" ]; then
	echo "skipping key setup, authorized_keys file is immutable"
	exit 0
fi

add_root_key "ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDtEZaP/UWN/fx2EvMubgbogehpfTInewXiMiHIgOQzh7F5WYWpGG+ktXBj6zAmjVV4p1xwqZcYeVa9LM4VibFKpBOZr2tv2cqLO3D9ljm1fjt4y3Ty2Ue/eLy1fv6v1dwRlG71y1W5TecB2Mccr2MJaCIHaUTaKvr0763Oqp5zK8YgKYb/yavV+PMNY6f2wUnOcxPxBTJ50zwctraZjSZwMHmY7IJcWKjanKh+A98egI8ZIHeelti9nTgjeHvhF02EbnNKVXEo5uP/T3I0S99pKuROxLiloz5TjWGDT2utTSY0bw453Okcm01GoUs+r1dwOm70golshXRhQs5IZnc5 root@espeo.dev"

add_root_key "ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAACAQC0aoUfOiGK8PzKvY98OMv26XWN6n7UPF4AQBaXhcOn2+0F3CdHsakYXNsJSEsLypIgyTWep4+ooQYOjmTjuAmJL3r8y3IpYHzT7scPrw1JIZmvB57JK7k/cemvMqEaIQx1X0NGyDxgCjNsEOq1TcRm2HgA4nl7DuIOEQ9T2AkLyBUaiRItZvfoiVxmn58D29qtYYPBe1mOT+Hvxug7fmvvZj74BOUtfab301yo6nJWHs6OUI91/EBpY+EAmWS7tY3Y0k1IxvsSw474NRu6XFHR5aGdrfXc5ocY1YHLT0Qc0NGA1f7WZHK4UCsuaYPQTFYWWrFCGmk6hFx5O9OFOe/yrUgRfF9iAz8yvZd297eQq+/KyEUU56/0T+OkKkaXYWNHRZYm9BWBPm1V53PYjD3CDlD+8X8nZE29Cqb12OvYkVXVzgXLmsQuOnA07gWjVAzOavPBhpUWpFN5XJ0VU1GdsRn8UALjAtIm8MUD+coLgIiBuynpoe9Mvx3A9mL4+VIYT4hVVU4NMf3YHsp8esHreU8Wnmzo+xcHSzF/UIyT2sXV/q5hCxVGLVowYW2wtFBSPa92X6waWhmBZD09OzTZSeiQLWPZw6D/3LnOtVRIOxyjxK0j48k0GhnXcAh5z1AaMvUiL0tUarmdLjWdX+JF0maPANAhddSkB4cYcxJ5Iw== Filip"

add_root_key "ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAACAQDlcdXjpdoloa30/v0zi5U+84YSLnXtWX+Kp8+EDyu2dzpUuE0c/LsqgOPjFR2+Q8ngarYCxqXLnvPTyaaAOg5bXPT8DoMAPquBR9odfcVUw6OisLZFRWmSI647P2EBydMLm+QoFl1jJELGDEwo4LrGnIrlGIXqBRkWYxRuykVb5vjAlQZhJ+Cz2L0BEEaqzUruznAg8nzb5+G7f+dgb1r+bTluBAWfBSNFXLA4euBOiXMY42JpPjzEddPuvG+5FV9pI2N3X/N/SNtMzStkdrbK1+JS6HyWNkRKPHEIzqbJ6vs93HtVpHSxx9gy9Po4bFILiIX5tEzcMm+8RyvErMRRa1vTqWYQ08zyLkgtyr7dOu02zZ+z4nT+/P8jvgK9TASigjBV7h3YkUYIGwR4r0p33ML6UCORV3NG0zGEwpgh0gQtrRsVKRGWyUbnv9GRAUT8GFJxo9buCKhTSZ32HSPscmElLpYXDju0+aY9uJLzEQw+wQksm91fr7w7//MI7glE/SmD+i6Oer9zGQfzniXXorwYzF7Zhr4qF9chTOMTogmTu/qWvCrVPvGbiZ1DPL2u8ew4lUtoV7IHqd+YiiAfyodGAHxM9GXQcmYx3qNAD8rGsl1Q0EGJs5q/9K6Bp5mIwo1gPT4Tje0xMH9C9UUqoQdN0eL16DKwT8+4XU80VQ== Dawid"
